---
title: 利用Envoy实现一个网关代理
date: 2020-06-10 22:13:00
tags: Envoy
author: 小笼包
categories: ServiceMesh
---

## 利用Envoy实现一个网关代理

> 作者: 小笼包  
> 2020-06-10 小雨

## 前言

在[初识Envoy](http://47.98.210.153:4000/2020/05/20/envoy/%E5%88%9D%E8%AF%86envoy/)中我们了解到Envoy的基本功能，基于这些通用而灵活的基本功能，可以实现一个**实时热更新**的L7层的网关代理。  

<!-- more -->

## 网关需要基本功能

- 可以代理多个Http协议应用服务。

- 可以自由实时定义需要暴露出去的接口（路由）。

- 提供规范的路由规则。

- 提供统一的安全校验。

- 提供多维度，多功能的限流。

- 提供蓝绿部署、灰度控制、AB、金丝雀发布等。

- 提供对代理服务的健康检验，以及容灾，降级的处理，同时对代理服务提供基本的一些连接参数的配置。

- 对代理服务进行可观测性监控，有效提供当出现问题时（例如网络通讯问题等）可以很快定位是哪个服务，出了什么问题。

## 概念性的一些解释

**1、什么是限流，网关上限流用在什么场合呢？**  

我理解的限流就是保护后端应用服务，控制访问流量在安全范围内进行快速响应的一种方案，它是互联网高并发下保护系统的手段之一，通常是对请求进行限制速度或在一个时间窗口内控制最大的安全请求数量，一旦达到阈值就会控制服务呈现等待排队或者直接拒绝请求等。  

常见的限流算法：    

1、令牌桶  


